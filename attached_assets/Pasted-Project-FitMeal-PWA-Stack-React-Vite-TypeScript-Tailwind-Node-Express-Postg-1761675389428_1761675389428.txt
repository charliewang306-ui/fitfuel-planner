Project: FitMeal â€“ æ°´+è¥å…»æ™ºèƒ½ç®¡å®¶ï¼ˆPWAï¼‰
Stack: React + Vite + TypeScript + Tailwind + Node/Express + PostgreSQL
Integrations: PostgreSQL (Replit), Web Push/Local Notifications, Camera (Barcode)

Core tables:
- UserProfile(id, weight_lb, goal, activity, wake_time, sleep_time, unit_pref)
- DailyTargets(date, user_id, kcal, protein_g, fat_g, carbs_g, fiber_g, water_oz)
- FoodItem(id, name, brand, per_unit_type[per100g|perserving], grams_per_serving?,
           kcal_100g, protein_100g, fat_100g, carbs_100g, fiber_100g, sodium_100g, tags[])
- FoodBarcode(gtin, food_id)
- FoodLog(id, user_id, datetime, food_id, amount_g, kcal, protein_g, fat_g, carbs_g, fiber_g)
- WaterLog(id, user_id, datetime, amount_oz)
- CheckinWeight(user_id, date, weight_lb)

Key features (V1):
1) ç›®æ ‡é…é¢å¼•æ“ï¼ˆåç«¯ /api/targets/generateï¼‰:
   - kcal = lb * (14|16|18) å†æŒ‰ cut(-300~500) / bulk(+200~400) è°ƒæ•´
   - protein = lb * 0.8 (ä½“è„‚é«˜å¯ç”¨ç›®æ ‡ä½“é‡)ï¼›fat = lb * 0.35ï¼›carb=ä½™é¢æ³•ï¼›water=lb*0.6 ozï¼›fiber=â‰¥14g/1000kcal
2) è®°å½•é¡µï¼š
   - é€‰æ‹©é£Ÿç‰© â†’ æ•°é‡è¾“å…¥ï¼ˆæ”¯æŒ g/oz/kgï¼‰â†’ å³æ—¶æ˜¾ç¤º kcal/P/F/C/çº¤ç»´ï¼ˆå…¬å¼åŸºäºæ¯100gï¼‰
   - åº•éƒ¨åˆè®¡ä¸â€œå‰©ä½™â€å®æ—¶æ›´æ–°
3) é¥®æ°´é¡µï¼š
   - å¤§æ°´ç“¶å®¹å™¨ï¼ˆè¿›åº¦åŠ¨ç”»ï¼‰ï¼Œæ˜¾ç¤º å·²å–/ç›®æ ‡(oz)ï¼Œå¿«æ· +8 / +12 / è‡ªå®šä¹‰
4) ä¸€é”®è¡¥è¶³æ¨èï¼ˆå‰ç«¯è°ƒç”¨ /api/suggestï¼‰ï¼š
   - è¾“å…¥å‰©ä½™ {P,F,C,kcal}ï¼Œè¾“å‡º 2â€“3 ç»„ï¼ˆè›‹ç™½+ä¸»é£ŸÂ±è„‚è‚ª/è”¬èœï¼‰ï¼Œå«ä»½é‡å’Œåå·®
5) æ‰«ç å½•å…¥ï¼š
   - å‰ç«¯ç”¨ zxing-js or @zxing/library è°ƒæ‘„åƒå¤´è¯»å– UPC/EAN/QR
   - å‘½ä¸­ FoodBarcode â†’ å›å¡« FoodItemï¼›æœªå‘½ä¸­èµ°â€œæ‹è¥å…»è¡¨ OCRï¼ˆå ä½æ¥å£ï¼‰/æ‰‹åŠ¨æ–°å¢â€
6) æé†’+å€’è®¡æ—¶ï¼ˆPWAï¼‰ï¼š
   - Local Notifications + å€’è®¡æ—¶æ¡ï¼›å¯æ¨è¿Ÿ 15/30/60 åˆ†ï¼›Web Push é¢„ç•™ service worker
7) é¦–é¡µçœ‹æ¿ï¼š
   - å¡è·¯é‡Œç¯ï¼›è›‹ç™½/è„‚è‚ª/ç¢³æ°´/çº¤ç»´/é¥®æ°´è¿›åº¦æ¡ï¼›ä¸‹æ–¹â€œğŸª„ä¸€é”®è¡¥è¶³â€å…¥å£
8) åŸºç¡€ç§å­åº“ï¼š
   - 50 æ¡å¸¸è§é£Ÿç‰©ï¼ˆé¸¡èƒ¸/ç‰›è‚‰/é¸¡è›‹/ç±³é¥­/ç‡•éº¦/é…¸å¥¶/ä¹³æ¸…/åšæœ/æ²¹/è”¬æœç­‰ï¼‰

APIs:
- GET /api/targets/today
- POST /api/foodlog (food_id, amount_g | amount_unit+value) â†’ è®¡ç®—å¹¶å…¥åº“
- POST /api/waterlog (amount_oz)
- GET /api/foods/search?q=
- POST /api/foods (è‡ªå®šä¹‰é£Ÿç‰©)
- GET /api/barcode/:gtin â†’ FoodItem
- POST /api/suggest (remain{P,F,C,kcal}) â†’ æ¨èç»„åˆ

Utilities (frontend):
- toGrams(value, unit g|oz|kg); 1 oz=28.3495 g
- calcNutritionPerIntake(grams, per100g)
- å•ä½æ˜¾ç¤ºåˆ‡æ¢ä»…å½±å“ UIï¼Œå†…éƒ¨ä¸€å¾‹å­˜ g / oz

PWA:
- æ³¨å†Œ service workerï¼›å®‰è£…æç¤ºï¼›Web Push å ä½ï¼ˆVAPID ä»¥åé…ç½®ï¼‰

Auth:
- å…ˆç”¨ç®€æ˜“ä¼šè¯ï¼ˆåŒ¿åç”¨æˆ· id å­˜ localStorageï¼‰ï¼Œä¸ºåç»­ OAuth é¢„ç•™

Build goals:
- å¯è¿è¡Œçš„ V1 å…¨æµç¨‹ï¼šå½•å…¥â†’æ˜¾ç¤ºè¥å…»â†’çœ‹æ¿å‰©ä½™â†’ä¸€é”®è¡¥è¶³â†’é¥®æ°´ç“¶â†’æé†’ï¼ˆæœ¬åœ°é€šçŸ¥ï¼‰
- æä¾› .env.exampleï¼ˆæ•°æ®åº“ URL ç­‰ï¼‰
